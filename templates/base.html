{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}MCA{% endblock %}</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root {
      --brand-navy: #0B2B4C;
      --brand-navy-600: #103A68;
      --ink-80: rgba(255, 255, 255, .88);
      --ink-60: rgba(255, 255, 255, .64);
    }
    body {
      min-height: 100vh;
      display: flex;
      flex-direction: row;
      background-color: #f8f9fa;
    }
    /* Sidebar */
    .sidebar {
      width: 250px;
      background-color: var(--brand-navy);
      color: var(--ink-80);
      display: flex;
      flex-direction: column;
      padding: 0;
      position: fixed;
      top: 0; bottom: 0; left: 0;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: .6rem;
      padding: .9rem 1rem;
      text-decoration: none;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,0));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .brand .logo {
      height: 40px;
      width: auto;
      object-fit: contain;
      display: block;
    }
    .sidebar a.navlink {
      color: var(--ink-60);
      padding: 12px 20px;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: .6rem;
      transition: background .15s ease, color .15s ease, padding-left .15s ease;
      border-left: 3px solid transparent;
    }
    .sidebar a.navlink:hover,
    .sidebar a.navlink:focus,
    .sidebar a.navlink.active {
      background-color: var(--brand-navy-600);
      color: #fff;
      border-left-color: #fff;
      padding-left: 23px;
      outline: none;
    }
    .content { margin-left: 250px; padding: 2rem; flex: 1; }
    .sidebar .authbox {
      margin-top: auto;
      padding: 1rem;
      border-top: 1px solid rgba(255,255,255,.08);
    }
    .sidebar .authbox .small { color: var(--ink-60); }
    .logoplace { background-color: #F8F9FA; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <!-- Logo -->
    <a href="{% url 'home' %}" class="brand logoplace">
      <img src="{% static 'img/logo.png' %}" alt="Logo" class="logo" onerror="this.style.display='none';">
    </a>

    {% if request.user.is_authenticated %}
      {% with funcionario=request.user.funcionario %}
        {% if funcionario.cargo == "ADMIN" or funcionario.cargo == "DIR" %}
          <!-- Diretoria / Administrativo -->
          <a href="{% url 'home' %}" class="navlink"><i class="fa-solid fa-house"></i> Home</a>
          <a href="{% url 'clientes:list' %}" class="navlink"><i class="fa-solid fa-users"></i> Clientes</a>
          <a href="{% url 'financeiro:list' %}" class="navlink"><i class="fa-solid fa-wallet"></i> Financeiro</a>
          <a href="{% url 'funcionarios:list' %}" class="navlink"><i class="fa-solid fa-chalkboard-user"></i> Funcionários</a>
          <a href="{% url 'condominios:list' %}" class="navlink"><i class="fa-solid fa-building"></i> Condomínios</a>
          <a href="{% url 'modalidades:list' %}" class="navlink"><i class="fa-solid fa-dumbbell"></i> Modalidades</a>
          <a href="{% url 'turmas:list' %}" class="navlink"><i class="fa-solid fa-layer-group"></i> Turmas</a>
          <a href="{% url 'parametros:listar_contratos' %}" class="navlink"><i class="fa-solid fa-cog"></i> Parâmetros</a>


        {% elif funcionario.cargo == "PROF" %}
          <!-- Professor -->
          <a href="{% url 'turmas:list' %}" class="navlink"><i class="fa-solid fa-layer-group"></i> Minhas Turmas</a>

        {% elif funcionario.cargo == "FIN" %}
          <!-- Financeiro -->
          <a href="{% url 'home' %}" class="navlink"><i class="fa-solid fa-house"></i> Home</a>
          <a href="{% url 'financeiro:list' %}" class="navlink"><i class="fa-solid fa-wallet"></i> Financeiro</a>

        {% elif funcionario.cargo == "RH" %}
          <!-- Recursos Humanos -->
          <a href="{% url 'home' %}" class="navlink"><i class="fa-solid fa-house"></i> Home</a>
          <a href="{% url 'funcionarios:list' %}" class="navlink"><i class="fa-solid fa-chalkboard-user"></i> Funcionários</a>

        {% else %}
          <!-- Outros cargos genéricos -->
          <a href="{% url 'home' %}" class="navlink"><i class="fa-solid fa-house"></i> Home</a>
        {% endif %}
      {% endwith %}
    {% endif %}

    {% if request.user.is_authenticated %}
    <div class="authbox">
      <div class="small mb-2">
        Logado como<br>
        <strong style="color:#fff">{{ request.user.get_full_name|default:request.user.username }}</strong><br>
        <small>{{ request.user.funcionario.get_cargo_display }}</small>
      </div>
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button class="btn btn-sm btn-outline-light w-100">
          <i class="fa-solid fa-right-from-bracket"></i> Sair
        </button>
      </form>
    </div>
    {% endif %}
  </aside>

  <!-- Conteúdo -->
  <main class="content">
    {% block content %}{% endblock %}
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
